name = "agent-worker"
main = "src/index.js"
compatibility_date = "2024-11-22"
compatibility_flags = ["nodejs_compat"]

# D1 Database Binding
[[d1_databases]]
binding = "DB"
database_name = "agent-db"
database_id = "e6946a3b-d7bc-4ec6-88be-d116c30746f4"

# Cron Triggers (Every 6 hours)
[triggers]
crons = ["0 */6 * * *"]

# Environment Variables (non-sensitive)
[vars]
GEMINI_MODEL = "gemini-2.0-flash-lite-preview-02-05"
TELEGRAM_API_URL = "https://api.telegram.org/bot"

# Observability
[observability]
enabled = true

# Browser Rendering Binding
[browser]
binding = "MYBROWSER"

# =============================================================================
# SECRETS (set via wrangler secret put)
# =============================================================================
# Run these commands to set secrets:
#   wrangler secret put GEMINI_API_KEY
#   wrangler secret put TELEGRAM_BOT_TOKEN
#   wrangler secret put TELEGRAM_CHAT_ID
